# IAM Service

An authentication service built for microservice architecture where tokens generated by the service can easily and safely be accepted by itself or other services within the system.

## Core Capabilities

### Authentication
- Enforces the use of strong passwords.
- Hashing of passwords for secure storage.
- JWT tokens signed using `RS256` (asymmetric key).
- Standardized OAuth2 Bearer token scheme for authentication.
- Supports key rotation.

### Authorization
- Supports Role Based Access Control (RBAC) with user and admin roles
- Self-service registration.

### Audit
- Detailed audit logging of all API calls for security monitoring and forensic analysis.

## Run

### IAM Service
```bash
./run.sh
```

### Unit-tests
```bash
./run-tests.sh
```

### API Docs

- Redoc: http://127.0.0.1:8000/redoc
- Swagger: http://127.0.0.1:8000/docs

## Features Not Implemented

This section mentions functionality that is not implemented due to various reasons.

#### Email Verification

- The service lacks ability to verify user's email at the time of registration. Ideally, the user should have to verify their email before they are allowed to login.
- This is not implemented because it requires infrastructure (or an external service like SNS or Twilio) to send emails. This has been left out for simplicity.

### Secret Store

- Tokens are signed and verified using private and public keys respectively. For simplicity, sample keys are stored locally with the service on the filesystem.
- Ideally, the keys should be stored securely in secret manager e.g: AWS Secrets Manager, Hashicorp Vault, etc. and read by the servcie at startup.
- This is not implemented as it requires additional infrastructure and implementation time.

### Infrastructure

Followng infrastructure is strongly recommended while running the service in production:

- Enforce rate limits at API gateway. The is needed for all endpoints, but especially for the user registration endpoint. Not having rate limits exposes the service to various attacks including user enumeration.
- A Web Application Firewall (WAF) will help guard against several threats like DDoS, malicious requests, geographical blocking etc.
- The service must be made available over HTTPS.
- These are not implemented as they require additional infrastructure and implementation time.

### Other Missing Security Features

- Suspend a user account for a certain duration for successively failing 'n' login attempts within a time window.
- Implement MFA.
- Current Authorization model is all-or-nothing where a role is either granted or not. This can be extended so that granular permissions can be managed within a role.
- These are not implemented as due to time constraints. They also require additional infrastructures.
